[gd_scene load_steps=8 format=3 uid="uid://cicqw2vl52xk8"]

[ext_resource type="Script" uid="uid://73pfg55eifov" path="res://Game/Players/Main/MainCharacter.cs" id="1_6jd5j"]
[ext_resource type="PackedScene" uid="uid://bxutcq26iq1ty" path="res://Game/Players/Main/Rig.tscn" id="2_i82dk"]
[ext_resource type="PackedScene" uid="uid://d4houp6rtapve" path="res://Game/Players/HealthComponent.tscn" id="2_m3x7x"]
[ext_resource type="Script" uid="uid://h5sa2msj6uxk" path="res://Game/Players/Main/SmoothCameraArm.cs" id="2_vjj1u"]
[ext_resource type="Script" uid="uid://bf28xdgtg6il4" path="res://Game/Players/Main/AttackCast.cs" id="4_2ms4b"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_hlfas"]

[sub_resource type="SeparationRayShape3D" id="SeparationRayShape3D_71ybq"]

[node name="MainCharacter" type="CharacterBody3D"]
collision_layer = 5
script = ExtResource("1_6jd5j")

[node name="HealthComponent" parent="." instance=ExtResource("2_m3x7x")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(0.7, 0, 0, 0, 0.9, 0, 0, 0, 0.5, 0, -0.0848615, 0)
shape = SubResource("CapsuleShape3D_hlfas")
debug_color = Color(1, 1, 1, 0.42)

[node name="SmoothCameraArm" type="SpringArm3D" parent="." node_paths=PackedStringArray("Target")]
transform = Transform3D(1, 0, 0, 0, 0.906308, 0.422618, 0, -0.422618, 0.906308, 0, 0, 0)
shape = SubResource("SeparationRayShape3D_71ybq")
spring_length = 4.0
script = ExtResource("2_vjj1u")
Target = NodePath("../HorizontalPivot/VerticalPivot")

[node name="C3DMain" type="Camera3D" parent="SmoothCameraArm"]

[node name="HorizontalPivot" type="Node3D" parent="."]

[node name="VerticalPivot" type="Node3D" parent="HorizontalPivot"]

[node name="RigPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Rig" parent="RigPivot" instance=ExtResource("2_i82dk")]

[node name="Skeleton3D" parent="RigPivot/Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(4.44089e-15, 0.909245, -0.0481736)
bones/2/rotation = Quaternion(0.00605726, -0.000288057, 0.00321155, 0.999977)
bones/3/rotation = Quaternion(-0.0893217, -0.000286824, 0.00852438, 0.995966)
bones/4/rotation = Quaternion(0.270622, 1.44928e-08, 9.16636e-08, 0.962686)
bones/6/rotation = Quaternion(-0.164297, -1.17791e-07, -1.83677e-08, 0.986411)
bones/7/position = Vector3(-2.70282e-08, 0.909245, -0.0481735)
bones/8/position = Vector3(-7.93674e-08, 0.909245, -0.0481735)
bones/9/position = Vector3(0.131144, 0.975449, -0.0351291)
bones/9/rotation = Quaternion(0.994168, 0.0202896, -0.031228, 0.10121)
bones/11/rotation = Quaternion(0.396797, -0.000695675, 0.000300864, 0.917906)
bones/13/rotation = Quaternion(-0.741528, 0.0118483, 0.0243633, 0.670375)
bones/15/position = Vector3(-0.131144, 0.975449, -0.0351291)
bones/15/rotation = Quaternion(0.975626, -0.00531549, 0.0276459, 0.217626)
bones/17/rotation = Quaternion(0.422823, 0.00316485, -0.00147679, 0.906205)
bones/19/rotation = Quaternion(-0.678879, -0.0281425, -0.00139472, 0.733709)
bones/21/position = Vector3(0.0251286, 1.43888, 0.0468491)
bones/21/rotation = Quaternion(-0.472151, -0.266595, -0.415541, 0.730292)
bones/22/position = Vector3(0.19125, 1.47762, -0.0109755)
bones/22/rotation = Quaternion(0.0233722, -0.163706, 0.975436, -0.145527)
bones/23/rotation = Quaternion(6.11561e-08, -0.0374594, 1.97605e-08, 0.999298)
bones/24/rotation = Quaternion(0.347807, -0.03746, -0.0217141, 0.936566)
bones/46/position = Vector3(-0.0113635, 1.43888, 0.0468491)
bones/46/rotation = Quaternion(-0.47403, 0.261111, 0.41231, 0.732883)
bones/47/position = Vector3(-0.176632, 1.47788, -0.013197)
bones/47/rotation = Quaternion(-0.0157968, -0.146872, 0.975985, 0.160099)
bones/48/rotation = Quaternion(-1.02349e-07, 0.0537394, -9.00661e-08, 0.998555)
bones/49/rotation = Quaternion(0.387914, 0.0537397, 0.0280976, 0.919698)
bones/71/position = Vector3(0.127191, 1.35963, -0.0246052)
bones/71/rotation = Quaternion(2.02316e-08, 0.599551, 0.800337, -4.58998e-08)
bones/72/position = Vector3(-0.113426, 1.35963, -0.0246053)
bones/72/rotation = Quaternion(2.02317e-08, 0.599551, 0.800337, -4.58998e-08)

[node name="RightHandBone" parent="RigPivot/Rig" index="2"]
transform = Transform3D(-0.962344, -0.270799, -0.0237169, 0.22294, -0.836157, 0.501138, -0.155539, 0.476979, 0.865042, -0.350448, 1.01012, 0.0252938)

[node name="LeftHandBone" parent="RigPivot/Rig" index="3"]
transform = Transform3D(-0.970513, 0.239107, 0.0305217, -0.209885, -0.900513, 0.38082, 0.118542, 0.363185, 0.924145, 0.34806, -0.0068115, -0.0104998)

[node name="RayAttachment" type="BoneAttachment3D" parent="RigPivot/Rig"]
transform = Transform3D(-0.962344, -0.270799, -0.0237169, 0.22294, -0.836157, 0.501138, -0.155539, 0.476979, 0.865042, -0.350448, 1.01012, 0.0252938)
bone_name = "DEF-hand.R"
bone_idx = 51
use_external_skeleton = true
external_skeleton = NodePath("../CharacterRig/GameRig/Skeleton3D")

[node name="AttackCast" type="RayCast3D" parent="RigPivot/Rig/RayAttachment"]
transform = Transform3D(-1.68204e-08, -8.01937e-08, 2, 2.49049, 0.0915136, 2.67181e-08, -0.21789, 1.046, 1.50996e-07, -0.0320413, 0.0812987, -0.0390901)
target_position = Vector3(0, 1, 0)
collision_mask = 8
script = ExtResource("4_2ms4b")

[connection signal="Defeat" from="HealthComponent" to="." method="OnHealthComponentDefeat"]

[editable path="RigPivot/Rig"]
[editable path="RigPivot/Rig/CharacterRig"]
